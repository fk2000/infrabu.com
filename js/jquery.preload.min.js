(function(d){var f=d.preload=function(g,b){function i(e){a.element=this;a.found="load"==e.type;a.image=this.src;a.index=this.index;e=a.original=g[this.index];a[a.found?"loaded":"failed"]++;a.done++;b.enforceCache&&f.cache.push(d("<img/>").attr("src",a.image)[0]);b.placeholder&&e.src&&(e.src=a.found?a.image:b.notFound||e.src);if(b.onComplete)b.onComplete(a);if(a.done<a.total)j(0,this);else if(h&&h.unbind&&h.unbind("load").unbind("error").unbind("abort"),h=null,b.onFinish)b.onFinish(a)}function j(e,
c,d){if(c.attachEvent&&a.next&&0==a.next%f.gap&&!d)return setTimeout(function(){j(e,c,!0)},0),!1;if(a.next==a.total)return!1;c.index=a.next;c.src=k[a.next++];b.onRequest&&(a.index=c.index,a.element=c,a.image=c.src,a.original=g[a.next-1],b.onRequest(a))}g.split&&(g=d(g));var b=d.extend({},f.defaults,b),k=d.map(g,function(a){if(a){if(a.split)return b.base+a+b.ext;var c=a.src||a.href;"string"==typeof b.placeholder&&a.src&&(a.src=b.placeholder);c&&b.find&&(c=c.replace(b.find,b.replace));return c||null}}),
a={loaded:0,failed:0,next:0,done:0,total:k.length};if(a.total)var h=d(Array(b.threshold+1).join("<img/>")).load(i).error(i).bind("abort",i).each(j);else if(b.onFinish)b.onFinish(a)};f.gap=14;f.cache=[];f.defaults={threshold:2,base:"",ext:"",replace:""};d.fn.preload=function(d){f(this,d);return this}})(jQuery);